<!DOCTYPE html>
<html>
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="utf-8">
  
  <meta name="renderer" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=edge" >
  <link rel="dns-prefetch" href="http://yoursite.com">
  <title>个人小站</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="个人小站">
<meta property="og:type" content="website">
<meta property="og:title" content="个人小站">
<meta property="og:url" content="http://yoursite.com/page/7/index.html">
<meta property="og:site_name" content="个人小站">
<meta property="og:description" content="个人小站">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="个人小站">
<meta name="twitter:description" content="个人小站">
  
    <link rel="alternative" href="/atom.xml" title="个人小站" type="application/atom+xml">
  
  
    <link rel="icon" href="/assets/img/favicon.ico">
  
  <link rel="stylesheet" type="text/css" href="/./main.4a524f.css">
  <style type="text/css">
  
    #container.show {
      background: linear-gradient(200deg,#a0cfe4,#e8c37e);
    }
  </style>
  

  
<script>
var _hmt = _hmt || [];
(function() {
	var hm = document.createElement("script");
	hm.src = "https://hm.baidu.com/hm.js?a30844fa2bcbce0a9e001fe06cefeddf";
	var s = document.getElementsByTagName("script")[0]; 
	s.parentNode.insertBefore(hm, s);
})();
</script><!-- hexo-inject:begin --><!-- hexo-inject:end -->


</head>

<body>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div id="container" q-class="show:isCtnShow">
    <canvas id="anm-canvas" class="anm-canvas"></canvas>
    <div class="left-col" q-class="show:isShow">
      
<div class="overlay" style="background: #4d4d4d"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			<img src="/img/fenghui2013.png" class="js-avatar">
		</a>
		<hgroup>
		  <h1 class="header-author"><a href="/">fenghui2013</a></h1>
		</hgroup>
		

		<nav class="header-menu">
			<ul>
			
				<li><a href="/">主页</a></li>
	        
			</ul>
		</nav>
		<nav class="header-smart-menu">
    		
    			
    			<a q-on="click: openSlider(e, 'innerArchive')" href="javascript:void(0)">所有文章</a>
    			
            
    			
            
    			
    			<a q-on="click: openSlider(e, 'aboutme')" href="javascript:void(0)">关于我</a>
    			
            
		</nav>
		<nav class="header-nav">
			<div class="social">
				
					<a class="github" target="_blank" href="https://github.com/fenghui2013" title="github"><i class="icon-github"></i></a>
		        
			</div>
		</nav>
	</header>		
</div>

    </div>
    <div class="mid-col" q-class="show:isShow,hide:isShow|isFalse">
      
<nav id="mobile-nav">
  	<div class="overlay js-overlay" style="background: #4d4d4d"></div>
	<div class="btnctn js-mobile-btnctn">
  		<div class="slider-trigger list" q-on="click: openSlider(e)"><i class="icon icon-sort"></i></div>
	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<img src="/img/fenghui2013.png" class="js-avatar">
			</div>
			<hgroup>
			  <h1 class="header-author js-header-author">fenghui2013</h1>
			</hgroup>
			
			
			
				
			
			
			
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://github.com/fenghui2013" title="github"><i class="icon-github"></i></a>
			        
				</div>
			</nav>

			<nav class="header-menu js-header-menu">
				<ul style="width: 50%">
				
				
					<li style="width: 100%"><a href="/">主页</a></li>
		        
				</ul>
			</nav>
		</header>				
	</div>
	<div class="mobile-mask" style="display:none" q-show="isShow"></div>
</nav>

      <div id="wrapper" class="body-wrap">
        <div class="menu-l">
          <div class="canvas-wrap">
            <canvas data-colors="#eaeaea" data-sectionHeight="100" data-contentId="js-content" id="myCanvas1" class="anm-canvas"></canvas>
          </div>
          <div id="js-content" class="content-ll">
            
  
    <article id="post-理论篇-归并排序" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/05/30/理论篇-归并排序/">理论篇-归并排序</a>
    </h1>
  

        
        <a href="/2017/05/30/理论篇-归并排序/" class="archive-article-date">
  	<time datetime="2017-05-30T07:58:50.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2017-05-30</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>归并排序是分而治之的典型应用。</p>
<p><strong>核心思想:</strong>将数组递<strong>归</strong>得拆分到只有一个元素，此时该元素是有序的。然后利用一个临时数组将有序的两个子序列合<strong>并</strong>成一个更大的有序子序列，直到数组中的所有元素都有序。</p>
<p><img src="/img/merge_sort.jpg" alt="merge_sort"></p>
<p><a href="https://github.com/fenghui2013/myblog_source/blob/master/c/merge_sort.c" target="_blank" rel="external">源码参考</a></p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color3">算法</a>
        		</li>
      		
		</ul>
	</div>

      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2017/05/30/理论篇-归并排序/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>








  
    <article id="post-理论篇-最简单的排序算法" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/05/29/理论篇-最简单的排序算法/">理论篇-最简单的排序算法</a>
    </h1>
  

        
        <a href="/2017/05/29/理论篇-最简单的排序算法/" class="archive-article-date">
  	<time datetime="2017-05-29T14:03:38.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2017-05-29</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>编程入门都会从学习简单的排序算法开始，下面我们介绍两个经典的排序算法: 冒泡排序和插入排序。时间复杂度都是$O(n^2)$，由于复杂度过高，所以实际中应用不多。</p>
<h4 id="冒泡排序"><a href="#冒泡排序" class="headerlink" title="冒泡排序"></a>冒泡排序</h4><p>冒泡排序得名于其排序过程中大数或小数会慢慢的浮到最上面，就像气泡浮出水面一样。</p>
<p><img src="/img/bubble_sort.jpg" alt="bubble_sort"></p>
<p><a href="https://github.com/fenghui2013/myblog_source/blob/master/c/bubble_sort.c" target="_blank" rel="external">源码参考</a></p>
<h4 id="插入排序"><a href="#插入排序" class="headerlink" title="插入排序"></a>插入排序</h4><p>插入排序的思想: 假设前半部分是有序的，然后将一个数插入到有序的前半部分中。</p>
<p><img src="/img/insert_sort.jpg" alt="insert_sort"></p>
<p><a href="https://github.com/fenghui2013/myblog_source/blob/master/c/insert_sort.c" target="_blank" rel="external">源码参考</a></p>
<h4 id="两种排序的比较"><a href="#两种排序的比较" class="headerlink" title="两种排序的比较"></a>两种排序的比较</h4><p>冒泡排序和插入排序是两种截然不同的排序算法，但是有些人会将这两个排序算法搞混，看着插入排序的有些写法向冒泡，可能是因为没有体会到这两种算法各自的精髓。</p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color3">算法</a>
        		</li>
      		
		</ul>
	</div>

      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2017/05/29/理论篇-最简单的排序算法/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>








  
    <article id="post-理论篇-非比较排序算法" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/05/29/理论篇-非比较排序算法/">理论篇-非比较排序算法</a>
    </h1>
  

        
        <a href="/2017/05/29/理论篇-非比较排序算法/" class="archive-article-date">
  	<time datetime="2017-05-29T08:48:29.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2017-05-29</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>在基于比较的排序算法中，归并排序与堆排序在最坏时间复杂度也能达到O(nlgn)，快速排序的平均时间复杂度是O(nlgn)。所以，基于比较的排序算法，O(nlgn)是最好表现。然而，基于非比较的排序算法的时间复杂度能达到O(n)。下面，我们介绍三个非比较的排序算法。</p>
<h4 id="计数排序"><a href="#计数排序" class="headerlink" title="计数排序"></a>计数排序</h4><p>计数排序是稳定的排序算法，基数排序中使用到了该排序算法。</p>
<p><img src="/img/counting_sort_1.png" alt="counting_sort_1"></p>
<p><img src="/img/counting_sort_2.png" alt="counting_sort_2"></p>
<h4 id="基数排序"><a href="#基数排序" class="headerlink" title="基数排序"></a>基数排序</h4><p><strong>基数排序的思想:</strong> 首先使用最低关键字排序，然后再使用次低关键字，直到最高关键字。这样经过n次时间复杂度为O(n)的排序得到最后结果。</p>
<p><img src="/img/radix_sort_1.png" alt="radix_sort_1"></p>
<p><img src="/img/radix_sort_2.png" alt="radix_sort_2"></p>
<p><strong>引用场景:</strong> 对于基于n个关键字的排序最有效</p>
<p><strong>相关问题:</strong></p>
<ol>
<li>对于大数的排序</li>
</ol>
<h4 id="桶排序"><a href="#桶排序" class="headerlink" title="桶排序"></a>桶排序</h4><p><strong>桶排序的思想:</strong> 首先，分配n个桶，将数据映射到桶中，然后再对桶中的数据进行排序(或继续使用桶排序算法或其他排序算法)。最后，将所有的桶中的数据串联起来，得到最后的结果。</p>
<p><img src="/img/bucket_sort_1.png" alt="bucket_sort_1"></p>
<p><img src="/img/bucket_sort_2.png" alt="bucket_sort_2"></p>
<p><strong>应用场景:</strong> 对于海量且范围有限的数据进行排序最有效。</p>
<p><strong>相关问题:</strong> </p>
<ol>
<li>一年的高考人数为500万，分数使用标准分，最低100，最高999，没有小数，要求对所有的分数进行排序。</li>
<li>在一个文件中有10G个整数，乱序排列，要求找出中位数。内存限制为2G。</li>
</ol>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color3">算法</a>
        		</li>
      		
		</ul>
	</div>

      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2017/05/29/理论篇-非比较排序算法/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>








  
    <article id="post-理论篇-求第k个最大值或最小值" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/05/29/理论篇-求第k个最大值或最小值/">理论篇-求第k个最大值或最小值</a>
    </h1>
  

        
        <a href="/2017/05/29/理论篇-求第k个最大值或最小值/" class="archive-article-date">
  	<time datetime="2017-05-29T08:39:11.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2017-05-29</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>问题描述:</strong> 在n个无序的数中，找到最大值或最小值</p>
<blockquote>
<p>解题思路: 选择第一个数与剩下的其他n-1个数进行比较，这样经过n-1比较后得到结果。时间复杂度O(n)</p>
</blockquote>
<p><strong>问题描述:</strong> 在n个无序的数中，同时找到最大值和最小值</p>
<blockquote>
<p>解题思路: 两个数为一组将数据分成若干组，首先组内比较一次，然后，最大值与组内最大值比较一次，最小值与组内最小值比较一次。这样每两个数经过3次比较就能得到最大值与最小值。最终比较次数3(n-2)/2。若n为偶数，第一个数即作为最大值也作为最小值，若n为奇数，前两个数比较得到最大值与最小值，除去第一个数之后进行分组比较。时间复杂度为O(n)</p>
</blockquote>
<p><strong>问题描述:</strong>在n个无序的数中，找到第k个最大或最小的数。</p>
<blockquote>
<p>解题思路: 首先进行排序，然后第k个数就是要找的答案。无论使用哪种基于比较的排序算法，最好的时间复杂度也要O(nlgn)。有没有更好的解决方法呢？</p>
</blockquote>
<p>从快速排序中受到启发，每次在数组中寻找支点p时，寻找的支点就是第p个最大或最小的数。我们使用如下算法，就能以接近O(n)的时间复杂度找到答案:</p>
<p><img src="/img/random_select.png" alt="random_select"></p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color3">算法</a>
        		</li>
      		
		</ul>
	</div>

      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2017/05/29/理论篇-求第k个最大值或最小值/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>








  
    <article id="post-理论篇-快速排序" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/05/28/理论篇-快速排序/">理论篇-快速排序</a>
    </h1>
  

        
        <a href="/2017/05/28/理论篇-快速排序/" class="archive-article-date">
  	<time datetime="2017-05-28T13:42:30.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2017-05-28</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>快速排序是生产环境中经常被用到的排序算法。快速排序算法也是一种运用分而治之思想的算法。</p>
<p>在分的过程中有两种不同的实现思想，分别如下图所示:</p>
<p><img src="/img/fastsort_1.png" alt="fastsort_1"></p>
<p><img src="/img/fastsort_2.jpg" alt="fastsort_2"></p>
<p>最近又看到一种实现: 填坑法。该方法比较简单，也比较容易理解。基本思想如下: </p>
<ol>
<li>将第一个数记下作为key，同时挖出第一个坑</li>
<li>然后从后向前找第一个小于等于key的数，然后将该数填充的之前的坑中，同时又挖出了另一个坑</li>
<li>然后从前向后找第一个大于key的数，然后将该数填充到之前的坑中，此时又挖了一个坑</li>
<li>一直循环过程2和3，直到相遇。最后将之前的key填到最后的坑中。</li>
</ol>
<p>这样保证了相遇位置之前的所有数都小于等于关键字，之后的数都大于关键字。</p>
<p><a href="https://github.com/fenghui2013/myblog_source/blob/master/c/fast_sort.c" target="_blank" rel="external">源码参考</a></p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color3">算法</a>
        		</li>
      		
		</ul>
	</div>

      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2017/05/28/理论篇-快速排序/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>








  
    <article id="post-理论篇-数据结构之堆" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/05/28/理论篇-数据结构之堆/">理论篇-数据结构之堆</a>
    </h1>
  

        
        <a href="/2017/05/28/理论篇-数据结构之堆/" class="archive-article-date">
  	<time datetime="2017-05-28T01:58:50.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2017-05-28</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>堆的底层实现一般是数组，堆可以看做是一棵近似完全二叉树。堆中的节点从上到下，从左到右，依次填充(只有最底层不会被填充满)。树的根节点是A[1]，给定任意节点，我们可以很容易得计算它的父节点，左孩子节点和右孩子节点的指针。</p>
<p><img src="/img/heap.png" alt="heap"></p>
<p>给定任意节点i，它的父节点、左孩子节点和右孩子节点的计算方法如下:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">parent: i/2</div><div class="line">left: 2i</div><div class="line">right: 2i+1</div></pre></td></tr></table></figure>
<p>有两种类型的二叉堆: 大顶堆和小顶堆。</p>
<p>大顶堆的性质如下: 除了跟节点之外，其他任何节点的值都要小于或等于父节点的值。</p>
<p>小顶堆的性质如下: 除了根节点之外，其他任何节点的值都要大于或等于父节点的值。</p>
<h4 id="应用"><a href="#应用" class="headerlink" title="应用"></a>应用</h4><p>堆的主要应用: 1. 堆排序 2.  实现优先级队列。</p>
<h5 id="堆排序"><a href="#堆排序" class="headerlink" title="堆排序"></a>堆排序</h5><p>堆排序对于从海量数据中获取最小或最大的k个数特别有效。</p>
<blockquote>
<p>思路: 首先建立一个能容纳k个元素的堆。然后遍历海量数据，将合适的值加入到堆中。最后进行一次堆排序，最后，得到已经有序的k个元素。</p>
</blockquote>
<h5 id="优先级队列"><a href="#优先级队列" class="headerlink" title="优先级队列"></a>优先级队列</h5><p>优先级队列一般用于任务的管理。比如最大优先级队列用来管理进程的切换，最小优先级队列用来管理超时任务。</p>
<p><a href="https://github.com/fenghui2013/myblog_source/blob/master/c/heap.c" target="_blank" rel="external">源代码</a></p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color5">数据结构</a>
        		</li>
      		
		</ul>
	</div>

      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2017/05/28/理论篇-数据结构之堆/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>








  
    <article id="post-理论篇-innodb的多版本控制" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/05/27/理论篇-innodb的多版本控制/">理论篇-innodb的多版本控制</a>
    </h1>
  

        
        <a href="/2017/05/27/理论篇-innodb的多版本控制/" class="archive-article-date">
  	<time datetime="2017-05-27T06:01:48.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2017-05-27</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>innodb是一个多版本存储引擎:为了支持事务功能(比如并发和回滚)，它保留已更新数据的一个或多个旧版本。这些信息被存储在表空间的rollback segment数据结构内。innodb使用这些信息来完成事务回滚操作或者为了一致性读而获取某些行的更早版本。</p>
<p>内部实现上，innodb在每行上增加如下三个字段:</p>
<ul>
<li>DB_TRX_ID，6个字节大小，最后插入或更新该行的事务id。删除操作也被当做一种更新操作来处理，本质是更新该行的某一个特定的位来表明该行已被删除。</li>
<li>DB_ROLL_PTR，7字节大小，回滚指针。该指针指向一个被写到rollback segment的undo日志记录。</li>
<li>DB_ROW_ID，6字节大小，行id。该字段是一个单调递增字段。如果innodb自动生成了一个集群索引，该索引会包含该字段的值。否则的话，该字段不会出现在任何索引上。</li>
</ul>
<p>rollback segment里的undo日志被分为insert undo日志和update undo日志。insert undo日志只在事务回滚的时候需要。事务提交之后，立即删除。update undo日志除了用在事务回滚上，也被用在一致性读上。当没有事务需要利用undate undo日志来构建之前版本的行记录时，这些update undo日志也会被删除。</p>
<p>定期提交你的事务，包括那些一致性读的这些事务。否则的话，innodb不会删除update undo日志。rollback segment可能会越来越大。</p>
<p>rollback segment里的undo日志记录的物理大小比相应的插入的或更新的行要小。你可以使用这些信息来计算rollback segment所需要的空间大小。</p>
<p>在innodb的多版本模式下，当你使用sql语句删除的时候，该行不会被物理的删除。只有当删除操作的update undo日志记录被删除的时候，innodb才会物理上删除相应的行和它的索引。该删除操作被称为purge。</p>
<p>当在一个表中频繁的进行插入和删除操作的时候，purge线程将停止工作并倒计时，表会因为所有的已删除的行而变得越来越大。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">innodb_max_purge_lag        # 该选项设置purge线程最大的等待时间，默认是0</div></pre></td></tr></table></figure>
<h4 id="Multi-Versioning-and-Secondary-Indexes-待考究"><a href="#Multi-Versioning-and-Secondary-Indexes-待考究" class="headerlink" title="Multi-Versioning and Secondary Indexes(待考究)"></a>Multi-Versioning and Secondary Indexes(待考究)</h4><p>innodb的MVCC对第二索引与集群索引的处理不同。在集群索引中的记录被实地(in-place)更新并且隐藏列指向了undo日志。第二索引没有隐藏列也不会实地(in-place)更新。</p>
<p>当第二索引的列被更新的时候，旧的第二索引记录有一个删除标记，新的记录被插入，被标记删除的记录最终会被清除。</p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color1">mysql</a>
        		</li>
      		
		</ul>
	</div>

      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2017/05/27/理论篇-innodb的多版本控制/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>








  
    <article id="post-理论篇-innodb与ACID模型" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/05/27/理论篇-innodb与ACID模型/">理论篇-innodb与ACID模型</a>
    </h1>
  

        
        <a href="/2017/05/27/理论篇-innodb与ACID模型/" class="archive-article-date">
  	<time datetime="2017-05-27T05:34:31.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2017-05-27</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>ACID模型是一系列数据库设计准则，该准则强调可靠性。InnnDB存储引擎接近于ACID模型，因此不论是软件故障还是硬件故障，数据的可靠性都能得到保障。你能通过调整mysql的设置在可靠性和更高的性能之间做一些取舍。</p>
<p>我们看下InnoDB存储引擎是怎么满足ACID模型的。</p>
<h4 id="Atomicity"><a href="#Atomicity" class="headerlink" title="Atomicity"></a>Atomicity</h4><p>原子性主要涉及InnoDB的事务。相关的mysql功能如下:</p>
<ul>
<li>autocommit设置</li>
<li>commit语句</li>
<li>rollback语句</li>
<li>表INFORMATION_SCHEMA中的数据</li>
</ul>
<h4 id="Consistency"><a href="#Consistency" class="headerlink" title="Consistency"></a>Consistency</h4><p>一致性主要涉及InnoDB用来保护数据的内部处理。相关的mysql功能如下:</p>
<ul>
<li>innodb的doublewrite buffer</li>
<li>innodb的crash recovery</li>
</ul>
<h4 id="Isolation"><a href="#Isolation" class="headerlink" title="Isolation"></a>Isolation</h4><p>隔离性主要涉及InnoDB的事务。相关的mysql功能如下:</p>
<ul>
<li>autocommit设置</li>
<li>SET ISOLATION LEVEL语句</li>
<li>innodb锁的底层实现细节。性能调优时，可参考表INFORMATION_SCHEMA中的数据</li>
</ul>
<h4 id="Durability"><a href="#Durability" class="headerlink" title="Durability"></a>Durability</h4><p>持久性涉及到了mysql与特定的硬件。相关的mysql功能如下:</p>
<ul>
<li>innodb的doublewrite buffer。可通过innodb_doublewrite选项配置</li>
<li>配置选项innodb_flush_log_at_trx_commit</li>
<li>配置选项sync_binlog</li>
<li>配置选项innodb_file_per_table</li>
<li>写缓冲到存储设备上，例如普通硬盘，SSD或者RAID磁盘阵列</li>
<li>存储设备上的备用电池</li>
<li>操作系统，特别是支持fsync系统调用</li>
<li>不间断的电力供应</li>
<li>备份策略</li>
<li>对于分布式应用来说，可靠的网络</li>
</ul>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color1">mysql</a>
        		</li>
      		
		</ul>
	</div>

      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2017/05/27/理论篇-innodb与ACID模型/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>








  
    <article id="post-理论篇-innodb的锁与事务" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/05/26/理论篇-innodb的锁与事务/">理论篇-innodb的锁与事务</a>
    </h1>
  

        
        <a href="/2017/05/26/理论篇-innodb的锁与事务/" class="archive-article-date">
  	<time datetime="2017-05-26T12:40:03.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2017-05-26</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="锁"><a href="#锁" class="headerlink" title="锁"></a>锁</h3><p>innodb实现了如下几种锁:</p>
<ul>
<li>share and exclusive locks</li>
<li>intention locks</li>
<li>record locks</li>
<li>gap locks</li>
<li>next-key locks</li>
<li>insert intention locks</li>
<li>AUTO-INC locks</li>
<li>predicate locks for spatial indexes</li>
</ul>
<h4 id="Shared-and-Exclusive-Locks"><a href="#Shared-and-Exclusive-Locks" class="headerlink" title="Shared and Exclusive Locks"></a>Shared and Exclusive Locks</h4><p>innodb实现两种类型的行级锁: shared locks(S) 和 exclusive locks(X)。</p>
<ul>
<li>S: 允许持有该锁的事务读取一行</li>
<li>X: 允许持有该锁的事务更新或删除一行</li>
</ul>
<p>如果事务T1在行r上获取了S锁，另一个事务T2也想获取行r上的锁，此时处理如下:</p>
<ul>
<li>若T2请求的是S锁，则立即获取</li>
<li>若T2请求的是X锁，则不能立即获取，需要等待事务T1上S锁的释放</li>
</ul>
<p>如果事务T1在行r上获取了X锁，不论事务T2想获取行r的什么类型的锁，都不能立即获取，需要等待事务T1上X锁的释放</p>
<h4 id="Intention-Locks"><a href="#Intention-Locks" class="headerlink" title="Intention Locks"></a>Intention Locks</h4><p>innodb支持多粒度锁定，多粒度锁定允许行级锁和表级锁同时存在。为了实现多粒度锁定，innodb引入了另外一种锁: 意向锁。在innodb里意向锁是一种表锁，表明了一个事务稍后想在某行上加的锁的类型(S锁还是X锁)。有两种类型的共享锁:</p>
<ul>
<li>IS: 事务T想在某些行上设置S锁</li>
<li>IX: 事务T想在某些行上设置X锁</li>
</ul>
<p>意向锁的协议如下:</p>
<ul>
<li>在事务在表t的某一行上获取S锁之前，它必须首先获取一个IS锁或更强的锁</li>
<li>在事务获取X锁之前，它必须首先获取一个IX锁</li>
</ul>
<table>
<thead>
<tr>
<th>–</th>
<th>X</th>
<th>IX</th>
<th>S</th>
<th>IS</th>
</tr>
</thead>
<tbody>
<tr>
<td>X</td>
<td>冲突</td>
<td>冲突</td>
<td>冲突</td>
<td>冲突</td>
</tr>
<tr>
<td>IX</td>
<td>冲突</td>
<td>不冲突</td>
<td>冲突</td>
<td>不冲突</td>
</tr>
<tr>
<td>S</td>
<td>冲突</td>
<td>冲突</td>
<td>不冲突</td>
<td>不冲突</td>
</tr>
<tr>
<td>IS</td>
<td>冲突</td>
<td>不冲突</td>
<td>不冲突</td>
<td>不冲突</td>
</tr>
</tbody>
</table>
<p>如果一个正在请求的锁和已经存在的锁是不冲突的，则该锁立即被获取。如果冲突的话，则不能立即被获取。直到已经存在的锁被释放之后，才能获取。如果一直不能获取，那可能是死锁了，会报错。</p>
<p>因此，除了全表请求之外，意向锁不会阻塞任何事情。意向锁的主要目的是表明某人正在锁定某行或想锁定某行。</p>
<h4 id="Record-Locks"><a href="#Record-Locks" class="headerlink" title="Record Locks"></a>Record Locks</h4><p>record locks是索引记录锁。例如<strong>select c1 from t where c1=10 for update;</strong>会阻止任何事务插入、更新或删除c1=10的行。</p>
<p>record locks总是锁定索引记录，尽管该表没有定义任何索引。对于这种情况，innodb会创建一个隐藏的集群索引，并使用该索引。</p>
<h4 id="Gap-Locks"><a href="#Gap-Locks" class="headerlink" title="Gap Locks"></a>Gap Locks</h4><p>gap locks是加在索引记录之间的间隙上的锁。该间隙包括记录之间、第一条之前、最后一条之后。例如<strong>select c1 from t where c1 between 10 and 20 for update;</strong>会阻止任何事务插入t.c1=15的数据，因为所有存在的值之间的间隙已经被锁定。</p>
<p>gap locks是性能和并发之间的权衡，被用在一些事务隔离级别里。</p>
<p><strong>select * from child where id = 100;</strong>若id是唯一索引，则不触发gap locks。若id没有被索引或者不是唯一索引，则触发gap locks。</p>
<p>事务之间的gap locks永远不冲突。在innodb里的gap locks是”纯粹被禁止的”，那意味着他们仅阻止其他事务向该间隙插入值，他们不会阻止其他事务在同一个间隙上获得间隙锁。</p>
<p>gap locks可以被禁用，比如在<strong>read committed</strong>事务隔离级别下。</p>
<h4 id="Next-Key-Locks"><a href="#Next-Key-Locks" class="headerlink" title="Next-Key Locks"></a>Next-Key Locks</h4><p>next-key locks是索引记录上的record locks和索引记录之前的间隙上的gap locks的组合。</p>
<p>innodb执行行级别锁定的方式:当innodb搜索表索引时，会在搜索到的所有记录上添加锁。因此行级锁实际上就是索引记录锁。在索引记录上的next-key locks也会影响到在那个索引之前的间隙。比如: 如果一个会话在索引记录R上有一个锁，另一个会话不能立即在索引记录R之前(按照索引顺序)的间隙里插入一条新的索引记录。</p>
<p>假设有一个索引有如下值: 10, 11, 13和20。对于这个索引可能的next-key locks覆盖如下四个间隙。”(“代表不包含该记录 “[“代表包含该记录</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">(negative infinity, 10]</div><div class="line">(10, 11]</div><div class="line">(11, 13]</div><div class="line">(13, 20]</div><div class="line">(20, positive infinity]</div></pre></td></tr></table></figure>
<p>默认情况下，innodb工作在repeatable read隔离级别下。在这种情况下，当尽心查找时，innodb使用next-key locks。next-key locks避免了幻读。</p>
<h4 id="Insert-Intention-Locks"><a href="#Insert-Intention-Locks" class="headerlink" title="Insert Intention Locks"></a>Insert Intention Locks</h4><p>insert intention locks是在行插入之前被insert操作设置的一种gap lock。该锁表明如果多个插入同一索引间隙的事务插入的不是同一间隙内的相同的位置，则不必互相等待。</p>
<p>假设有一个索引，有4和7两个值。有两个事务分别想插入5和6这两个值。每个事务在插入行上获取X锁之前都优先获取了insert intention locks(锁定了4到7之间的间隙)。但是不会互相阻塞，因为行之间没有冲突。</p>
<h4 id="AUTO-INC-locks"><a href="#AUTO-INC-locks" class="headerlink" title="AUTO-INC locks"></a>AUTO-INC locks</h4><p>AUTO-INC locks是一个特殊的表级别的锁。当表中有AUTO_INCREMENT列时事务自动使用该锁。当一个事务正在插入一个表，其他想插入该表的事务必须等待。因此，第一个事务插入的自增值是连续的。</p>
<p>innodb_autoinc_lock_mode控制了自增锁使用的算法。它允许你在自增的连续性上和并发插入之间做一个取舍。</p>
<h4 id="Predicate-Locks-for-Spatial-Indexes"><a href="#Predicate-Locks-for-Spatial-Indexes" class="headerlink" title="Predicate Locks for Spatial Indexes"></a>Predicate Locks for Spatial Indexes</h4><h4 id="查看"><a href="#查看" class="headerlink" title="查看"></a>查看</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div></pre></td><td class="code"><pre><div class="line">show engine innodb status;</div><div class="line"></div><div class="line">&gt;select * from t where a=200 lock in share mode;</div><div class="line">RECORD LOCKS space id 26 page no 3 n bits 96 index PRIMARY of table `lock_test`.`t` trx id 2317 **lock mode S locks rec but not gap waiting**</div><div class="line">Record lock, heap no 22 PHYSICAL RECORD: n_fields 4; compact format; info bits 0</div><div class="line"> 0: len 4; hex 800000c8; asc     ;;</div><div class="line"> 1: len 6; hex 00000000090c; asc       ;;</div><div class="line"> 2: len 7; hex 2b0000014801ca; asc +   H  ;;</div><div class="line"> 3: len 10; hex 66666620202020202020; asc fff       ;;</div><div class="line"></div><div class="line">&gt;select * from t where a=200 for update;</div><div class="line">RECORD LOCKS space id 26 page no 3 n bits 96 index PRIMARY of table `lock_test`.`t` trx id 2317 **lock_mode X locks rec but not gap waiting**</div><div class="line">Record lock, heap no 22 PHYSICAL RECORD: n_fields 4; compact format; info bits 0</div><div class="line"> 0: len 4; hex 800000c8; asc     ;;</div><div class="line"> 1: len 6; hex 00000000090c; asc       ;;</div><div class="line"> 2: len 7; hex 2b0000014801ca; asc +   H  ;;</div><div class="line"> 3: len 10; hex 66666620202020202020; asc fff       ;;</div><div class="line"> </div><div class="line">&gt;select * from t where a&lt;=200 lock in share mode;</div><div class="line">RECORD LOCKS space id 26 page no 3 n bits 96 index PRIMARY of table `lock_test`.`t` trx id 2317 **lock mode S waiting**</div><div class="line">Record lock, heap no 22 PHYSICAL RECORD: n_fields 4; compact format; info bits 0</div><div class="line"> 0: len 4; hex 800000c8; asc     ;;</div><div class="line"> 1: len 6; hex 00000000090c; asc       ;;</div><div class="line"> 2: len 7; hex 2b0000014801ca; asc +   H  ;;</div><div class="line"> 3: len 10; hex 66666620202020202020; asc fff       ;;</div><div class="line"> </div><div class="line">&gt;select * from t where a&lt;=200 for update;</div><div class="line">RECORD LOCKS space id 26 page no 3 n bits 96 index PRIMARY of table `lock_test`.`t` trx id 2317 **lock_mode X waiting**</div><div class="line">Record lock, heap no 22 PHYSICAL RECORD: n_fields 4; compact format; info bits 0</div><div class="line"> 0: len 4; hex 800000c8; asc     ;;</div><div class="line"> 1: len 6; hex 00000000090c; asc       ;;</div><div class="line"> 2: len 7; hex 2b0000014801ca; asc +   H  ;;</div><div class="line"> 3: len 10; hex 66666620202020202020; asc fff       ;;</div><div class="line"> </div><div class="line"> </div><div class="line">&gt;update t set b=&quot;ttt&quot; where a=200;</div><div class="line">RECORD LOCKS space id 26 page no 3 n bits 96 index PRIMARY of table `lock_test`.`t` trx id 2319 **lock_mode X locks rec but not gap waiting**</div><div class="line">Record lock, heap no 22 PHYSICAL RECORD: n_fields 4; compact format; info bits 0</div><div class="line"> 0: len 4; hex 800000c8; asc     ;;</div><div class="line"> 1: len 6; hex 00000000090c; asc       ;;</div><div class="line"> 2: len 7; hex 2b0000014801ca; asc +   H  ;;</div><div class="line"> 3: len 10; hex 66666620202020202020; asc fff       ;;</div><div class="line"> </div><div class="line">&gt;update t set b=&quot;ttt&quot; where a&lt;=200;</div><div class="line">RECORD LOCKS space id 26 page no 3 n bits 96 index PRIMARY of table `lock_test`.`t` trx id 2319 **lock_mode X waiting**</div><div class="line">Record lock, heap no 22 PHYSICAL RECORD: n_fields 4; compact format; info bits 0</div><div class="line"> 0: len 4; hex 800000c8; asc     ;;</div><div class="line"> 1: len 6; hex 00000000090c; asc       ;;</div><div class="line"> 2: len 7; hex 2b0000014801ca; asc +   H  ;;</div><div class="line"> 3: len 10; hex 66666620202020202020; asc fff       ;;</div><div class="line"> </div><div class="line">&gt;select * from t where a&lt;=200 lock in share mode;</div><div class="line">&gt;insert into t values(20, &quot;aaa&quot;, &quot;aaa&quot;);</div><div class="line">RECORD LOCKS space id 28 page no 3 n bits 72 index PRIMARY of table `lock_test`.`t` trx id 2345 **lock_mode X locks gap before rec insert intention waiting**</div><div class="line">Record lock, heap no 3 PHYSICAL RECORD: n_fields 5; compact format; info bits 0</div><div class="line"> 0: len 4; hex 800000c8; asc     ;;</div><div class="line"> 1: len 6; hex 000000000928; asc      (;;</div><div class="line"> 2: len 7; hex 3d000001340410; asc =   4  ;;</div><div class="line"> 3: len 10; hex 72727220202020202020; asc rrr       ;;</div><div class="line"> 4: SQL NULL;</div></pre></td></tr></table></figure>
<h3 id="事务模型"><a href="#事务模型" class="headerlink" title="事务模型"></a>事务模型</h3><p>innodb的事务模型目标是结合多版本控制与传统的两阶段锁的各自的优点。innodb默认情况下，执行行级别的锁定和非锁定的一致性读。这与orcal有点类似。innodb里锁信息的存储是极其节省空间的。</p>
<h4 id="事务隔离级别"><a href="#事务隔离级别" class="headerlink" title="事务隔离级别"></a>事务隔离级别</h4><p>事务隔离级别的选取是在性能与结果的可靠性、一致性和再现性之间的一种取舍。</p>
<p>innodb提供了SQL:1992标准中所有的隔离级别:</p>
<ul>
<li>READ UNCOMMITED</li>
<li>READ COMMITTED</li>
<li>REPEATABLE READ</li>
<li>SERIALIZABLE</li>
</ul>
<p>innodb默认的隔离级别是REPEATBLE READ。</p>
<p>innodb使用不同的锁策略来支持每一种隔离级别。隔离级别越高，对锁的要求越高。如果对一致性要求比较高，则使用repeatable read隔离级别。若对一致性要求不高，或者为了降低锁的开销，可以使用read committed，甚至是read uncommitted。serializable隔离级别一般不会使用。</p>
<p>下面解释下innodb是怎么支持各个事务隔离级别的。</p>
<h5 id="REPEATABLE-READ"><a href="#REPEATABLE-READ" class="headerlink" title="REPEATABLE READ"></a>REPEATABLE READ</h5><p>在同一个事务里的一致性读读取的是第一次读操作产生的快照。这意味着如果你在同一个事务里执行了几次非锁定的select语句，这些select语句是一致的。</p>
<p>对于锁定读(select … for update或者select … lock in share mode)，update和delete操作，锁定依赖于语句是在唯一索引上使用唯一搜索条件还是一种范围类型的搜索条件。</p>
<ul>
<li>对于在唯一索引上使用唯一搜索条件的，innodb仅锁定发现的行记录。</li>
<li>对于其他的搜索，innodb会锁定被浏览过的索引范围，使用gap locks或者next-key locks来阻止其他会话向索引范围覆盖的间隙内插入。</li>
</ul>
<h5 id="READ-COMMITTED"><a href="#READ-COMMITTED" class="headerlink" title="READ COMMITTED"></a>READ COMMITTED</h5><p>在同一个事务里的每一个一致性读设置和读取最新的快照。</p>
<p>对于锁定读(select … for update和select … lock in share mode)，update和delete操作，innodb只锁定索引记录，没有间隙锁定，因此允许在锁定行的左右自由的插入新的记录。Gap locking is only used for foreign-key constraint checking and duplicate-key checking.</p>
<p>由于gap locks被禁用了，所以当其他会话插入新的记录时，有可能会产生幻读。</p>
<p>如果你使用read committed事务隔离级别，必须使用row-base的二进制日志。</p>
<p>使用read committed有一些其他的影响:</p>
<ul>
<li>对于update和delete操作，innodb仅在它更新或删除的行上加锁。在mysql执行了where条件匹配后，不匹配的行上的锁会被释放。这减少了死锁发生的可能性，但也会发生。</li>
<li>对于update操作，如果某行已经被锁定，innodb将执行一个伪一致性的读，返回最新被提交的版本，随后mysql使用该行来判断是否匹配update的where条件。如果匹配，mysql再次读取该行，这次innodb将会锁定该行或者是等待锁定该行。</li>
</ul>
<p>考虑一个例子:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">CREATE TABLE t (a INT NOT NULL, b INT) ENGINE = InnoDB;INSERT INTO t VALUES (1,2),(2,3),(3,2),(4,3),(5,2);COMMIT;</div></pre></td></tr></table></figure>
<p>在这个例子里面，表没有索引，因此搜索和索引检查使用隐藏的集群索引来进行锁定。</p>
<p>假设一个客户端执行了如下的update操作:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">SET autocommit = 0;UPDATE t SET b = 5 WHERE b = 3;</div></pre></td></tr></table></figure>
<p>另一个客户端随后执行了如下的update操作:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">SET autocommit = 0;UPDATE t SET b = 4 WHERE b = 2;</div></pre></td></tr></table></figure>
<p>当innodb执行每个update操作时，首先会在每行上获取一个X锁，随后决定是否更新它。如果innodb不执行修改，则释放锁。否则的话，innodb将持有该锁直到事务结束。</p>
<p>当事务隔离级别是repeatable read时，第一个update操作会获取X锁并且不会释放任何一个锁。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">x-lock(1,2); retain x-lockx-lock(2,3); update(2,3) to (2,5); retain x-lockx-lock(3,2); retain x-lockx-lock(4,3); update(4,3) to (4,5); retain x-lockx-lock(5,2); retain x-lock</div></pre></td></tr></table></figure>
<p>当第二个update获取锁时，将会被阻塞(因此第一个更新已经锁定了所有的行)直到第一个update提交或回滚。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">x-lock(1,2); block and wait for first UPDATE to commit or roll back</div></pre></td></tr></table></figure>
<p>当事务隔离级别是read committed时，第一个update将会获取锁并且释放那些它不需要修改的行的锁。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">x-lock(1,2); unlock(1,2)x-lock(2,3); update(2,3) to (2,5); retain x-lockx-lock(3,2); unlock(3,2)x-lock(4,3); update(4,3) to (4,5); retain x-lockx-lock(5,2); unlock(5,2)</div></pre></td></tr></table></figure>
<p>对于第二个update，innodb执行一个伪一致性读操作，返回每一行最新的被提交的版本到mysql，随后mysql决定哪些行匹配update的where条件。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">x-lock(1,2); update(1,2) to (1,4); retain x-lockx-lock(2,3); unlock(2,3)x-lock(3,2); update(3,2) to (3,4); retain x-lockx-lock(4,3); unlock(4,3)x-lock(5,2); update(5,2) to (5,4); retain x-lock</div></pre></td></tr></table></figure>
<p>设置innodb_locks_unsafe_for_binlog等于使用read committed隔离级别。但是一般不要使用该选项。</p>
<h5 id="READ-UNCOMMITTED"><a href="#READ-UNCOMMITTED" class="headerlink" title="READ UNCOMMITTED"></a>READ UNCOMMITTED</h5><p>在该事务隔离级别下会导致脏读，即读到其他事务修改但未提交的数据。其他的工作机制与read committed一样。</p>
<h5 id="SERIALIZABLE"><a href="#SERIALIZABLE" class="headerlink" title="SERIALIZABLE"></a>SERIALIZABLE</h5><h4 id="autocommit-commit和rollback"><a href="#autocommit-commit和rollback" class="headerlink" title="autocommit, commit和rollback"></a>autocommit, commit和rollback</h4><p>在innodb里，所有的用户活动都发生在事务里。如果autocommit开启的话，每一个sql语句组成一个单独的事务。默认情况下，mysql为每一个新的连接创建一个autocommit开启的会话，因此如果语句执行没有返回错误，mysql将会自动提交该事务。如果语句执行有错误，回滚还是提交依赖于错误的类型。</p>
<p>如果想在autocommit开启的会话里执行多语句事务，需要通过显式的START TRANSACTION或BEGIN语句来开启一个事务，通过COMMIT或ROLLBACK关闭一个事务。</p>
<p>如果autocommit默认是关闭的，若没有显式提交该事务的话，mysql将回滚该事务。</p>
<p>一些语句会隐式结束一个事务，就像在执行那个语句之前执行了COMMIT。</p>
<p>COMMIT意味着在当前事务中做的修改将被持久化和对其他会话可见。ROLLBACK将取消该事务的所有修改。COMMIT和ROLLBACK都会释放掉在当前事务中获取的锁。</p>
<p>使用事务打包DML操作: 在autocommit关闭的会话里，通过显式执行COMMIT或ROLLBACK结束事务。在autocommit开启的事务里，通过显式执行START TRANSACTION或BEGIN开启一个事务，显式执行COMMIT或ROLLBACK结束一个事务。</p>
<h4 id="一致性非锁定读"><a href="#一致性非锁定读" class="headerlink" title="一致性非锁定读"></a>一致性非锁定读</h4><p>一致性读意味着InnoDB通过多版本给某次查询返回一个数据库在某个时间点的快照。查询将会看到在那个时间点之前提交的事务的修改，不会看到在那个时间点之后提交的或未提交事务的修改。该规则有一个特例: 在同一个事务里查询可以看到之前语句的修改。该特例引发一些反常的事情:如果更新了表中的某些行，查询将会看到被修改行的最新版本，和其他行的旧版本。如果其他事务同时更新了同一张表，反常的事情意味着你看到的表处在一个不存在在数据库中的状态。</p>
<p>如果事务隔离级别是REPEATABLE READ，在同一个事务里的所有一致性读读取的是在该事务中第一次查询所产生的快照。通过提交当前事务然后进行查询能获得一个更新的快照。</p>
<p>在READ COMMITTED事务隔离级别下，在一个事务里的每一个一致性读都会设置和读取最新的快照。</p>
<p>假设你运行在默认的事务隔离级别REPEATABLE READ下，当你触发一致性读的时候，InnoDB会给你的事务设置一个时间点。如果另一个事务在该时间点之后对数据做了一些修改并且提交，这些修改对你来说是不可见的。</p>
<p><strong>注意:</strong>数据库状态快照仅应用到事务中的SELECT语句，不会对DML语句产生影响。如果你在一个事务中插入或修改了一些行并且提交，另一个并发事务中的UPDATE或DELETE将会修改这些刚被提交的行，尽管查询不到它们。如果一个事务更新或删除了被不同事务提交的行，这些改变对当前事务变成可见的。</p>
<p>通过将提交事务后进行新的查询来使时间点前进。这叫多版本并发控制。</p>
<p>如果你想看到最新的数据库的状态，使用READ COMMITTED事务隔离级别或锁定读。</p>
<p>在READ COMMITTED事务隔离级别下，在事务里的每一个一致性读将设置和读取最新的快照。在LOCK SHARE IN MODE，一个锁定读被触发: SELECT将会阻塞直到包含最新行的事务结束。</p>
<p>一致性读不能工作在某些DDL语句上:</p>
<ul>
<li>一致性读不能工作在DROP TABLE上，因为mysql不能使用一个已经被删除的表并且innodb删除了该表。</li>
<li>一致性读不能工作在ALTER TABLE上，因为该语句制作了一个原始表的临时拷贝并且当拷贝完成后会删除原始表。当你在事务中重新触发一致性读的时候，新表里的行是不可见的因为事务的快照被制作的时候这些行是不可见的。在这种情况下，事务返回一个错误: ER_TABLE_DEF_CHANGED</li>
</ul>
<p>在某些主从语句中，某些读取操作也不会使用一致性读。比如INSERT INTO … SELECT, UPDATE … (SELECT), CREATE TABLE … SELECT。这些SELECT未指定FOR UPDATE或LOCK IN SHARE MODE。</p>
<ul>
<li>默认情况下，InnoDB使用更强的锁，SELECT更像READ COMMITTED，每个一致性读设置或读取新的快照。</li>
<li>在这些情况下，为了使用一致性读，开启innodb_locks_unsafe_for_binlog选项，设置隔离级别为READ UNCOMMITTED, READ COMMITTED, REPEATABLE READ。在这种情况下，没有锁被设置。</li>
</ul>
<h4 id="锁定读"><a href="#锁定读" class="headerlink" title="锁定读"></a>锁定读</h4><p>如果你在一个事务里查询数据随后插入或更新相关的数据，普通的SELECT语句不能提供足够的保护。其它事务可以更新或删除你刚刚查询的行。InnoDB支持两种类型的锁定读，锁定读提供了安全保障。</p>
<ul>
<li><p>SELECT … LOCK IN SHARE MODE</p>
<p>  在读取的行上设置一个共享锁。其它的会话能读取该行，但是直到该事务提交之后才能修改它们。如果这些行被另一个还未提交的事务修改了，该查询将会阻塞直到事务结束随后使用最新的数据。</p>
</li>
<li><p>SELECT … FOR UPDATE</p>
<p>  对于搜索触发的索引记录，在行和任何相关的索引实体上设置一个排它锁。如果你执行了一个UPDATE操作，效果是一样的。如果其它事务执行以下操作，将会被阻塞: 1. 更新这些行 2. SELECT … LOCK IN SHARE MODE 3. 在某些事务隔离级别下的读。</p>
</li>
</ul>
<p>当处理树结构或图结构的数据时，这些语句是非常有用的。</p>
<p>被SELECT … LOCK IN SHARE MODE或SELECT … FOR UPDATE设置的锁在事务提交或回滚之后被释放。</p>
<h5 id="InnoDB里被不同SQL语句设置的锁"><a href="#InnoDB里被不同SQL语句设置的锁" class="headerlink" title="InnoDB里被不同SQL语句设置的锁"></a>InnoDB里被不同SQL语句设置的锁</h5><p>锁定读、UPDATE、DELETE通常会在浏览的记录上设置record locks。</p>
<p>如果使用辅助索引且索引记录锁是排它的，InnoDB也会获取相应的集群索引记录然后锁定它们。</p>
<p>如果执行全表扫描，每行都会被锁定。</p>
<p>SELECT … LOCK IN SHARE MODE和SELECT … FOR UPDATE只在满足条件的结果上加锁。</p>
<p>InnoDB设置如下不同的锁:</p>
<ul>
<li>SELECT … FROM是一个一致性读，获取数据库的快照，没有锁除非事务隔离级别是SERIALIZABLE。</li>
<li>SELECT … FROM … LOCK IN SHARE MODE在搜索触及的所有索引记录上设置一个共享的next-key locks。然而，对于一个使用唯一索引搜索唯一行的语句，一个record locks被设置</li>
<li>SELECT … FROM … FOR UPDATE在搜索触及的所有索引记录上设置一个排它的next-key locks。然而，对于一个使用唯一索引搜索唯一行的语句，一个record locks被设置</li>
<li>UPDATE … WHERE …在搜索触及的所有索引记录上设置一个排它的next-key locks。然而，对于一个使用唯一索引搜索唯一行的语句，一个record locks被设置</li>
<li>当UPDATE修改一个集群索引记录时，隐式的锁会被设置在辅助索引上。The UPDATE operation also takes shared locks on affected secondary index records when performing duplicate check scans prior to inserting new secondary index records, and when inserting new secondary index records.</li>
<li>DELETE FROM … WHERE …在搜索触及的所有索引记录上设置一个排它的next-key locks。然而，对于一个使用唯一索引搜索唯一行的语句，一个record locks被设置</li>
<li>INSERT在被插入的记录上设置一个排它锁。该锁是record locks，不会阻止其他会话在被插入的行之前进行插入</li>
<li>INSERT … ON DUPLICATE KEY UPDATE与简单的INSERT不同，当重复键错误发生时，会获得一个排它锁而不是共享锁</li>
<li>如果在唯一索引上没有冲突的话REPLACE和INSERT一样。否则的话，一个排它的next-key locks将被设置</li>
<li>INSERT INTO T SELECT … FROM S WHERE …</li>
<li>AUTO_INCREMENT</li>
<li>FOREIGN KEY</li>
<li>LOCK TABLES</li>
</ul>
<h4 id="幻读"><a href="#幻读" class="headerlink" title="幻读"></a>幻读</h4>
      

      
    </div>
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color1">mysql</a>
        		</li>
      		
		</ul>
	</div>

      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2017/05/26/理论篇-innodb的锁与事务/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>








  
    <article id="post-理论篇-python之运算符重载" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/05/25/理论篇-python之运算符重载/">理论篇-python之运算符重载</a>
    </h1>
  

        
        <a href="/2017/05/25/理论篇-python之运算符重载/" class="archive-article-date">
  	<time datetime="2017-05-25T10:18:59.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2017-05-25</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>可重载的运算符:</p>
<table>
<thead>
<tr>
<th>方法</th>
<th>重载</th>
<th>调用</th>
</tr>
</thead>
<tbody>
<tr>
<td>__new__</td>
<td>创建</td>
<td>在__init__之前创建对象</td>
</tr>
<tr>
<td>__init__</td>
<td>构造函数</td>
<td>对象建立: x = Class(args)</td>
</tr>
<tr>
<td>__del__</td>
<td>析构函数</td>
<td>x对象收回__call__</td>
<td>函数调用 x(*args, **kwargs)</td>
</tr>
<tr>
<td>__delete__</td>
<td></td>
<td></td>
</tr>
<tr>
<td>__dict__</td>
<td>属性字典，实例调用时只返回实例属性 类调用时只返回类属性</td>
<td></td>
</tr>
<tr>
<td>__slots__</td>
<td></td>
<td></td>
</tr>
<tr>
<td>__class__</td>
<td>实例所属的类的链接</td>
<td></td>
</tr>
<tr>
<td>__bases__</td>
<td>实例超类引用的元组</td>
<td></td>
</tr>
<tr>
<td>__getattr__</td>
<td>获得属性(针对未定义的属性) 点号运算</td>
<td></td>
</tr>
<tr>
<td>__setattr__</td>
<td>属性赋值运算</td>
<td></td>
</tr>
<tr>
<td>__delattr__</td>
<td>属性删除运算 </td>
</tr>
<tr>
<td>__getattribute__</td>
<td>获得属性(针对所有属性)</td>
<td></td>
</tr>
<tr>
<td>__and__</td>
<td>与运算</td>
<td>1 and 2</td>
</tr>
<tr>
<td>__or__</td>
<td>或运算</td>
<td>1 or 2</td>
</tr>
<tr>
<td>__str__</td>
<td>适合人读取的信息， 当没有实现时，返回repr的内容</td>
<td>pirnt(x) repr(x) str(x)</td>
</tr>
<tr>
<td>__repr__</td>
<td>适合机器读取的信息</td>
<td></td>
</tr>
<tr>
<td>__getiiem__</td>
<td>索引运算</td>
<td>x[key], x[i:j], 没<strong>iter</strong>时的for循环和其他迭代器</td>
</tr>
<tr>
<td>__setitem__</td>
<td>索引赋值语句</td>
<td>x[key]=value x[i:j]=sequence</td>
</tr>
<tr>
<td>__delitem__</td>
<td>索引和分片删除</td>
<td>del x[key], del x[i:j]</td>
</tr>
<tr>
<td>__len__</td>
<td>长度</td>
<td>len(x), 如果没有__bool__, 真值测试</td>
</tr>
<tr>
<td>__bool__</td>
<td>布尔测试</td>
<td>bool(x), 真测试，在2.6中是__nonzero__</td>
</tr>
<tr>
<td>__lt__,__gt__</td>
<td></td>
<td></td>
</tr>
<tr>
<td>__le__,__ge__</td>
<td></td>
<td></td>
</tr>
<tr>
<td>__eq__,__ne__</td>
<td>特定的比较</td>
<td>x<y, x="">y, x&lt;=y, x&gt;=y, x==y, x!=y 在2.6中只有__cmp__</y,></td>
</tr>
<tr>
<td>__radd__</td>
<td>右侧加法</td>
<td>other + x</td>
</tr>
<tr>
<td>__iadd__</td>
<td>实地加法</td>
<td>x + y</td>
</tr>
<tr>
<td>__iter__, __next__</td>
<td>迭代环境</td>
<td>I=iter(x), next(I); for loops</td>
</tr>
<tr>
<td>__contains__</td>
<td>成员关系测试</td>
<td>item in x</td>
</tr>
<tr>
<td>__index__</td>
<td>整数值</td>
<td></td>
</tr>
<tr>
<td>__enter__, __exit__</td>
<td>环境管理器</td>
<td>with obj as var:</td>
</tr>
<tr>
<td>__get__, __set__</td>
<td>描述符属性</td>
<td>x.attr, x.attr=value, del x.attr</td>
</tr>
<tr>
<td>__index__</td>
<td>返回某一个实例的整数值</td>
<td>hex(x), bin(x), oct(x)</td>
</tr>
</tbody>
</table>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div></pre></td><td class="code"><pre><div class="line">__repr__         # repr  适合开发人员阅读的信息</div><div class="line">__str__          # print str  适合用户阅读的信息</div><div class="line"></div><div class="line">本质上，__str__重载了__repr__，若没有__str__，则默认全部调用__repr__</div><div class="line"></div><div class="line">__add__</div><div class="line">__radd__</div><div class="line">__iadd__</div><div class="line"></div><div class="line">class Commuter:</div><div class="line">    def __init__(self, val):</div><div class="line">        self.val = val</div><div class="line">    </div><div class="line">    def __add__(self, other):</div><div class="line">        print(&quot;__add__&quot;, self.val, other)</div><div class="line">        return self.val + other</div><div class="line">        </div><div class="line">    def __radd__(self, other):</div><div class="line">        print(&quot;__radd__&quot;, self.val, other)</div><div class="line">        return other + self.val</div><div class="line"></div><div class="line">    def __iadd__(self, other):</div><div class="line">        print(&quot;__iadd__&quot;, self.val, other)</div><div class="line">        self.val += other</div><div class="line">        return self</div><div class="line">        </div><div class="line">x = Commuter(88)</div><div class="line">y = Commuter(99)        </div><div class="line">print(x+1)           # __add__</div><div class="line">print(1+x)           # __radd__</div><div class="line">print(x+y)           # __add__ __radd__</div><div class="line">x += 1               # __iadd__</div><div class="line"></div><div class="line"></div><div class="line">__call__             # 使一个实例可被调用</div><div class="line"></div><div class="line">__lt__               # &gt;</div><div class="line">__le__               # &gt;=</div><div class="line">__gt__               # &lt;</div><div class="line">__ge__               # =&lt;</div><div class="line">__eq__               # ==</div><div class="line">__ne__               # !=</div><div class="line">__cmp__              # 返回一个整数值 大于0 小于0 或等于0 2.x中可用 3.x中已删除 优先使用以上六种运算符，若没有，再使用本运算符</div><div class="line"></div><div class="line">class C:</div><div class="line">    data = &quot;spam&quot;</div><div class="line">    def __gt__(self, other):</div><div class="line">        return self.data &gt; other</div><div class="line">    </div><div class="line">    def __lt__(self, other):</div><div class="line">        return self.data &lt; other</div><div class="line">        </div><div class="line">    def __cmp__(self, other):</div><div class="line">        return cmp(self.data, other)</div><div class="line">        </div><div class="line">x = C()</div><div class="line">print(c &gt; &quot;ham&quot;)</div><div class="line">print(c &lt; &quot;ham&quot;)</div><div class="line"></div><div class="line">__bool__        </div><div class="line">__len__          # 在boolean环境下，首先尝试__bool__，若没定义，则尝试__len__</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">__del__          # 析构函数</div></pre></td></tr></table></figure>
      

      
    </div>
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color2">python</a>
        		</li>
      		
		</ul>
	</div>

      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2017/05/25/理论篇-python之运算符重载/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>








  
  
    <nav id="page-nav">
      <a class="extend prev" rel="prev" href="/page/6/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><a class="page-number" href="/page/6/">6</a><span class="page-number current">7</span><a class="page-number" href="/page/8/">8</a><a class="page-number" href="/page/9/">9</a><span class="space">&hellip;</span><a class="page-number" href="/page/15/">15</a><a class="extend next" rel="next" href="/page/8/">Next &raquo;</a>
    </nav>
  


          </div>
        </div>
      </div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2017 fenghui2013
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
    </div>
  </div>
</footer>
    </div>
    <script>
	var yiliaConfig = {
		mathjax: true,
		isHome: true,
		isPost: false,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: true,
		root: "/",
		innerArchive: true,
		showTags: false
	}
</script>

<script>!function(t){function n(r){if(e[r])return e[r].exports;var o=e[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}var e={};return n.m=t,n.c=e,n.p="./",n(0)}([function(t,n,e){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,n){var e=/\/|index.html/g;return t.replace(e,"")===n.replace(e,"")}function i(){for(var t=document.querySelectorAll(".js-header-menu li a"),n=window.location.pathname,e=0,r=t.length;e<r;e++){var i=t[e];o(n,i.getAttribute("href"))&&(0,d.default)(i,"active")}}function u(t){for(var n=t.offsetLeft,e=t.offsetParent;null!==e;)n+=e.offsetLeft,e=e.offsetParent;return n}function f(t){for(var n=t.offsetTop,e=t.offsetParent;null!==e;)n+=e.offsetTop,e=e.offsetParent;return n}function c(t,n,e,r,o){var i=u(t),c=f(t)-n;if(c-e<=o){var a=t.$newDom;a||(a=t.cloneNode(!0),(0,h.default)(t,a),t.$newDom=a,a.style.position="fixed",a.style.top=(e||c)+"px",a.style.left=i+"px",a.style.zIndex=r||2,a.style.width="100%",a.style.color="#fff"),a.style.visibility="visible",t.style.visibility="hidden"}else{t.style.visibility="visible";var s=t.$newDom;s&&(s.style.visibility="hidden")}}function a(){var t=document.querySelector(".js-overlay"),n=document.querySelector(".js-header-menu");c(t,document.body.scrollTop,-63,2,0),c(n,document.body.scrollTop,1,3,0)}function s(){document.querySelector("#container").addEventListener("scroll",function(t){a()}),window.addEventListener("scroll",function(t){a()}),a()}function l(){x.default.versions.mobile&&window.screen.width<800&&(i(),s())}var p=e(71),d=r(p),v=e(72),y=(r(v),e(84)),h=r(y),b=e(69),x=r(b),m=e(75),g=r(m),w=e(70);l(),(0,w.addLoadEvent)(function(){g.default.init()}),t.exports={}},function(t,n){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)},function(t,n){var e={}.hasOwnProperty;t.exports=function(t,n){return e.call(t,n)}},function(t,n,e){var r=e(49),o=e(15);t.exports=function(t){return r(o(t))}},function(t,n,e){t.exports=!e(8)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,n,e){var r=e(6),o=e(12);t.exports=e(4)?function(t,n,e){return r.f(t,n,o(1,e))}:function(t,n,e){return t[n]=e,t}},function(t,n,e){var r=e(10),o=e(30),i=e(24),u=Object.defineProperty;n.f=e(4)?Object.defineProperty:function(t,n,e){if(r(t),n=i(n,!0),r(e),o)try{return u(t,n,e)}catch(t){}if("get"in e||"set"in e)throw TypeError("Accessors not supported!");return"value"in e&&(t[n]=e.value),t}},function(t,n,e){var r=e(22)("wks"),o=e(13),i=e(1).Symbol,u="function"==typeof i,f=t.exports=function(t){return r[t]||(r[t]=u&&i[t]||(u?i:o)("Symbol."+t))};f.store=r},function(t,n){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,n,e){var r=e(35),o=e(16);t.exports=Object.keys||function(t){return r(t,o)}},function(t,n,e){var r=e(11);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,n){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,n){t.exports=function(t,n){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:n}}},function(t,n){var e=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++e+r).toString(36))}},function(t,n){var e=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=e)},function(t,n){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,n){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,n){t.exports={}},function(t,n){t.exports=!0},function(t,n){n.f={}.propertyIsEnumerable},function(t,n,e){var r=e(6).f,o=e(2),i=e(7)("toStringTag");t.exports=function(t,n,e){t&&!o(t=e?t:t.prototype,i)&&r(t,i,{configurable:!0,value:n})}},function(t,n,e){var r=e(22)("keys"),o=e(13);t.exports=function(t){return r[t]||(r[t]=o(t))}},function(t,n,e){var r=e(1),o="__core-js_shared__",i=r[o]||(r[o]={});t.exports=function(t){return i[t]||(i[t]={})}},function(t,n){var e=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:e)(t)}},function(t,n,e){var r=e(11);t.exports=function(t,n){if(!r(t))return t;var e,o;if(n&&"function"==typeof(e=t.toString)&&!r(o=e.call(t)))return o;if("function"==typeof(e=t.valueOf)&&!r(o=e.call(t)))return o;if(!n&&"function"==typeof(e=t.toString)&&!r(o=e.call(t)))return o;throw TypeError("Can't convert object to primitive value")}},function(t,n,e){var r=e(1),o=e(14),i=e(18),u=e(26),f=e(6).f;t.exports=function(t){var n=o.Symbol||(o.Symbol=i?{}:r.Symbol||{});"_"==t.charAt(0)||t in n||f(n,t,{value:u.f(t)})}},function(t,n,e){n.f=e(7)},function(t,n,e){var r=e(1),o=e(14),i=e(46),u=e(5),f="prototype",c=function(t,n,e){var a,s,l,p=t&c.F,d=t&c.G,v=t&c.S,y=t&c.P,h=t&c.B,b=t&c.W,x=d?o:o[n]||(o[n]={}),m=x[f],g=d?r:v?r[n]:(r[n]||{})[f];d&&(e=n);for(a in e)s=!p&&g&&void 0!==g[a],s&&a in x||(l=s?g[a]:e[a],x[a]=d&&"function"!=typeof g[a]?e[a]:h&&s?i(l,r):b&&g[a]==l?function(t){var n=function(n,e,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(n);case 2:return new t(n,e)}return new t(n,e,r)}return t.apply(this,arguments)};return n[f]=t[f],n}(l):y&&"function"==typeof l?i(Function.call,l):l,y&&((x.virtual||(x.virtual={}))[a]=l,t&c.R&&m&&!m[a]&&u(m,a,l)))};c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,t.exports=c},function(t,n){var e={}.toString;t.exports=function(t){return e.call(t).slice(8,-1)}},function(t,n,e){var r=e(11),o=e(1).document,i=r(o)&&r(o.createElement);t.exports=function(t){return i?o.createElement(t):{}}},function(t,n,e){t.exports=!e(4)&&!e(8)(function(){return 7!=Object.defineProperty(e(29)("div"),"a",{get:function(){return 7}}).a})},function(t,n,e){"use strict";var r=e(18),o=e(27),i=e(36),u=e(5),f=e(2),c=e(17),a=e(51),s=e(20),l=e(58),p=e(7)("iterator"),d=!([].keys&&"next"in[].keys()),v="@@iterator",y="keys",h="values",b=function(){return this};t.exports=function(t,n,e,x,m,g,w){a(e,n,x);var O,S,_,j=function(t){if(!d&&t in A)return A[t];switch(t){case y:return function(){return new e(this,t)};case h:return function(){return new e(this,t)}}return function(){return new e(this,t)}},P=n+" Iterator",E=m==h,M=!1,A=t.prototype,T=A[p]||A[v]||m&&A[m],L=T||j(m),N=m?E?j("entries"):L:void 0,C="Array"==n?A.entries||T:T;if(C&&(_=l(C.call(new t)),_!==Object.prototype&&(s(_,P,!0),r||f(_,p)||u(_,p,b))),E&&T&&T.name!==h&&(M=!0,L=function(){return T.call(this)}),r&&!w||!d&&!M&&A[p]||u(A,p,L),c[n]=L,c[P]=b,m)if(O={values:E?L:j(h),keys:g?L:j(y),entries:N},w)for(S in O)S in A||i(A,S,O[S]);else o(o.P+o.F*(d||M),n,O);return O}},function(t,n,e){var r=e(10),o=e(55),i=e(16),u=e(21)("IE_PROTO"),f=function(){},c="prototype",a=function(){var t,n=e(29)("iframe"),r=i.length,o="<",u=">";for(n.style.display="none",e(48).appendChild(n),n.src="javascript:",t=n.contentWindow.document,t.open(),t.write(o+"script"+u+"document.F=Object"+o+"/script"+u),t.close(),a=t.F;r--;)delete a[c][i[r]];return a()};t.exports=Object.create||function(t,n){var e;return null!==t?(f[c]=r(t),e=new f,f[c]=null,e[u]=t):e=a(),void 0===n?e:o(e,n)}},function(t,n,e){var r=e(35),o=e(16).concat("length","prototype");n.f=Object.getOwnPropertyNames||function(t){return r(t,o)}},function(t,n){n.f=Object.getOwnPropertySymbols},function(t,n,e){var r=e(2),o=e(3),i=e(45)(!1),u=e(21)("IE_PROTO");t.exports=function(t,n){var e,f=o(t),c=0,a=[];for(e in f)e!=u&&r(f,e)&&a.push(e);for(;n.length>c;)r(f,e=n[c++])&&(~i(a,e)||a.push(e));return a}},function(t,n,e){t.exports=e(5)},function(t,n,e){var r=e(15);t.exports=function(t){return Object(r(t))}},function(t,n,e){t.exports={default:e(41),__esModule:!0}},function(t,n,e){t.exports={default:e(42),__esModule:!0}},function(t,n,e){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}n.__esModule=!0;var o=e(39),i=r(o),u=e(38),f=r(u),c="function"==typeof f.default&&"symbol"==typeof i.default?function(t){return typeof t}:function(t){return t&&"function"==typeof f.default&&t.constructor===f.default&&t!==f.default.prototype?"symbol":typeof t};n.default="function"==typeof f.default&&"symbol"===c(i.default)?function(t){return"undefined"==typeof t?"undefined":c(t)}:function(t){return t&&"function"==typeof f.default&&t.constructor===f.default&&t!==f.default.prototype?"symbol":"undefined"==typeof t?"undefined":c(t)}},function(t,n,e){e(65),e(63),e(66),e(67),t.exports=e(14).Symbol},function(t,n,e){e(64),e(68),t.exports=e(26).f("iterator")},function(t,n){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,n){t.exports=function(){}},function(t,n,e){var r=e(3),o=e(61),i=e(60);t.exports=function(t){return function(n,e,u){var f,c=r(n),a=o(c.length),s=i(u,a);if(t&&e!=e){for(;a>s;)if(f=c[s++],f!=f)return!0}else for(;a>s;s++)if((t||s in c)&&c[s]===e)return t||s||0;return!t&&-1}}},function(t,n,e){var r=e(43);t.exports=function(t,n,e){if(r(t),void 0===n)return t;switch(e){case 1:return function(e){return t.call(n,e)};case 2:return function(e,r){return t.call(n,e,r)};case 3:return function(e,r,o){return t.call(n,e,r,o)}}return function(){return t.apply(n,arguments)}}},function(t,n,e){var r=e(9),o=e(34),i=e(19);t.exports=function(t){var n=r(t),e=o.f;if(e)for(var u,f=e(t),c=i.f,a=0;f.length>a;)c.call(t,u=f[a++])&&n.push(u);return n}},function(t,n,e){t.exports=e(1).document&&document.documentElement},function(t,n,e){var r=e(28);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},function(t,n,e){var r=e(28);t.exports=Array.isArray||function(t){return"Array"==r(t)}},function(t,n,e){"use strict";var r=e(32),o=e(12),i=e(20),u={};e(5)(u,e(7)("iterator"),function(){return this}),t.exports=function(t,n,e){t.prototype=r(u,{next:o(1,e)}),i(t,n+" Iterator")}},function(t,n){t.exports=function(t,n){return{value:n,done:!!t}}},function(t,n,e){var r=e(9),o=e(3);t.exports=function(t,n){for(var e,i=o(t),u=r(i),f=u.length,c=0;f>c;)if(i[e=u[c++]]===n)return e}},function(t,n,e){var r=e(13)("meta"),o=e(11),i=e(2),u=e(6).f,f=0,c=Object.isExtensible||function(){return!0},a=!e(8)(function(){return c(Object.preventExtensions({}))}),s=function(t){u(t,r,{value:{i:"O"+ ++f,w:{}}})},l=function(t,n){if(!o(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!i(t,r)){if(!c(t))return"F";if(!n)return"E";s(t)}return t[r].i},p=function(t,n){if(!i(t,r)){if(!c(t))return!0;if(!n)return!1;s(t)}return t[r].w},d=function(t){return a&&v.NEED&&c(t)&&!i(t,r)&&s(t),t},v=t.exports={KEY:r,NEED:!1,fastKey:l,getWeak:p,onFreeze:d}},function(t,n,e){var r=e(6),o=e(10),i=e(9);t.exports=e(4)?Object.defineProperties:function(t,n){o(t);for(var e,u=i(n),f=u.length,c=0;f>c;)r.f(t,e=u[c++],n[e]);return t}},function(t,n,e){var r=e(19),o=e(12),i=e(3),u=e(24),f=e(2),c=e(30),a=Object.getOwnPropertyDescriptor;n.f=e(4)?a:function(t,n){if(t=i(t),n=u(n,!0),c)try{return a(t,n)}catch(t){}if(f(t,n))return o(!r.f.call(t,n),t[n])}},function(t,n,e){var r=e(3),o=e(33).f,i={}.toString,u="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],f=function(t){try{return o(t)}catch(t){return u.slice()}};t.exports.f=function(t){return u&&"[object Window]"==i.call(t)?f(t):o(r(t))}},function(t,n,e){var r=e(2),o=e(37),i=e(21)("IE_PROTO"),u=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=o(t),r(t,i)?t[i]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?u:null}},function(t,n,e){var r=e(23),o=e(15);t.exports=function(t){return function(n,e){var i,u,f=String(o(n)),c=r(e),a=f.length;return c<0||c>=a?t?"":void 0:(i=f.charCodeAt(c),i<55296||i>56319||c+1===a||(u=f.charCodeAt(c+1))<56320||u>57343?t?f.charAt(c):i:t?f.slice(c,c+2):(i-55296<<10)+(u-56320)+65536)}}},function(t,n,e){var r=e(23),o=Math.max,i=Math.min;t.exports=function(t,n){return t=r(t),t<0?o(t+n,0):i(t,n)}},function(t,n,e){var r=e(23),o=Math.min;t.exports=function(t){return t>0?o(r(t),9007199254740991):0}},function(t,n,e){"use strict";var r=e(44),o=e(52),i=e(17),u=e(3);t.exports=e(31)(Array,"Array",function(t,n){this._t=u(t),this._i=0,this._k=n},function(){var t=this._t,n=this._k,e=this._i++;return!t||e>=t.length?(this._t=void 0,o(1)):"keys"==n?o(0,e):"values"==n?o(0,t[e]):o(0,[e,t[e]])},"values"),i.Arguments=i.Array,r("keys"),r("values"),r("entries")},function(t,n){},function(t,n,e){"use strict";var r=e(59)(!0);e(31)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,n=this._t,e=this._i;return e>=n.length?{value:void 0,done:!0}:(t=r(n,e),this._i+=t.length,{value:t,done:!1})})},function(t,n,e){"use strict";var r=e(1),o=e(2),i=e(4),u=e(27),f=e(36),c=e(54).KEY,a=e(8),s=e(22),l=e(20),p=e(13),d=e(7),v=e(26),y=e(25),h=e(53),b=e(47),x=e(50),m=e(10),g=e(3),w=e(24),O=e(12),S=e(32),_=e(57),j=e(56),P=e(6),E=e(9),M=j.f,A=P.f,T=_.f,L=r.Symbol,N=r.JSON,C=N&&N.stringify,k="prototype",F=d("_hidden"),q=d("toPrimitive"),I={}.propertyIsEnumerable,B=s("symbol-registry"),D=s("symbols"),W=s("op-symbols"),H=Object[k],K="function"==typeof L,R=r.QObject,J=!R||!R[k]||!R[k].findChild,U=i&&a(function(){return 7!=S(A({},"a",{get:function(){return A(this,"a",{value:7}).a}})).a})?function(t,n,e){var r=M(H,n);r&&delete H[n],A(t,n,e),r&&t!==H&&A(H,n,r)}:A,G=function(t){var n=D[t]=S(L[k]);return n._k=t,n},$=K&&"symbol"==typeof L.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof L},z=function(t,n,e){return t===H&&z(W,n,e),m(t),n=w(n,!0),m(e),o(D,n)?(e.enumerable?(o(t,F)&&t[F][n]&&(t[F][n]=!1),e=S(e,{enumerable:O(0,!1)})):(o(t,F)||A(t,F,O(1,{})),t[F][n]=!0),U(t,n,e)):A(t,n,e)},Y=function(t,n){m(t);for(var e,r=b(n=g(n)),o=0,i=r.length;i>o;)z(t,e=r[o++],n[e]);return t},Q=function(t,n){return void 0===n?S(t):Y(S(t),n)},X=function(t){var n=I.call(this,t=w(t,!0));return!(this===H&&o(D,t)&&!o(W,t))&&(!(n||!o(this,t)||!o(D,t)||o(this,F)&&this[F][t])||n)},V=function(t,n){if(t=g(t),n=w(n,!0),t!==H||!o(D,n)||o(W,n)){var e=M(t,n);return!e||!o(D,n)||o(t,F)&&t[F][n]||(e.enumerable=!0),e}},Z=function(t){for(var n,e=T(g(t)),r=[],i=0;e.length>i;)o(D,n=e[i++])||n==F||n==c||r.push(n);return r},tt=function(t){for(var n,e=t===H,r=T(e?W:g(t)),i=[],u=0;r.length>u;)!o(D,n=r[u++])||e&&!o(H,n)||i.push(D[n]);return i};K||(L=function(){if(this instanceof L)throw TypeError("Symbol is not a constructor!");var t=p(arguments.length>0?arguments[0]:void 0),n=function(e){this===H&&n.call(W,e),o(this,F)&&o(this[F],t)&&(this[F][t]=!1),U(this,t,O(1,e))};return i&&J&&U(H,t,{configurable:!0,set:n}),G(t)},f(L[k],"toString",function(){return this._k}),j.f=V,P.f=z,e(33).f=_.f=Z,e(19).f=X,e(34).f=tt,i&&!e(18)&&f(H,"propertyIsEnumerable",X,!0),v.f=function(t){return G(d(t))}),u(u.G+u.W+u.F*!K,{Symbol:L});for(var nt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),et=0;nt.length>et;)d(nt[et++]);for(var nt=E(d.store),et=0;nt.length>et;)y(nt[et++]);u(u.S+u.F*!K,"Symbol",{for:function(t){return o(B,t+="")?B[t]:B[t]=L(t)},keyFor:function(t){if($(t))return h(B,t);throw TypeError(t+" is not a symbol!")},useSetter:function(){J=!0},useSimple:function(){J=!1}}),u(u.S+u.F*!K,"Object",{create:Q,defineProperty:z,defineProperties:Y,getOwnPropertyDescriptor:V,getOwnPropertyNames:Z,getOwnPropertySymbols:tt}),N&&u(u.S+u.F*(!K||a(function(){var t=L();return"[null]"!=C([t])||"{}"!=C({a:t})||"{}"!=C(Object(t))})),"JSON",{stringify:function(t){if(void 0!==t&&!$(t)){for(var n,e,r=[t],o=1;arguments.length>o;)r.push(arguments[o++]);return n=r[1],"function"==typeof n&&(e=n),!e&&x(n)||(n=function(t,n){if(e&&(n=e.call(this,t,n)),!$(n))return n}),r[1]=n,C.apply(N,r)}}}),L[k][q]||e(5)(L[k],q,L[k].valueOf),l(L,"Symbol"),l(Math,"Math",!0),l(r.JSON,"JSON",!0)},function(t,n,e){e(25)("asyncIterator")},function(t,n,e){e(25)("observable")},function(t,n,e){e(62);for(var r=e(1),o=e(5),i=e(17),u=e(7)("toStringTag"),f=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],c=0;c<5;c++){var a=f[c],s=r[a],l=s&&s.prototype;l&&!l[u]&&o(l,u,a),i[a]=i.Array}},function(t,n){"use strict";var e={versions:function(){var t=window.navigator.userAgent;return{trident:t.indexOf("Trident")>-1,presto:t.indexOf("Presto")>-1,webKit:t.indexOf("AppleWebKit")>-1,gecko:t.indexOf("Gecko")>-1&&t.indexOf("KHTML")==-1,mobile:!!t.match(/AppleWebKit.*Mobile.*/),ios:!!t.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:t.indexOf("Android")>-1||t.indexOf("Linux")>-1,iPhone:t.indexOf("iPhone")>-1||t.indexOf("Mac")>-1,iPad:t.indexOf("iPad")>-1,webApp:t.indexOf("Safari")==-1,weixin:t.indexOf("MicroMessenger")==-1}}()};t.exports=e},function(t,n,e){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var o=e(40),i=r(o),u=function(){function t(t,n,e){return n||e?String.fromCharCode(n||e):o[t]||t}function n(t){return l[t]}var e=/&quot;|&lt;|&gt;|&amp;|&nbsp;|&apos;|&#(\d+);|&#(\d+)/g,r=/['<> "&]/g,o={"&quot;":'"',"&lt;":"<","&gt;":">","&amp;":"&","&nbsp;":" "},f=/\u00a0/g,c=/<br\s*\/?>/gi,a=/\r?\n/g,s=/\s/g,l={};for(var p in o)l[o[p]]=p;return o["&apos;"]="'",l["'"]="&#39;",{encode:function(t){return t?(""+t).replace(r,n).replace(a,"<br/>").replace(s,"&nbsp;"):""},decode:function(n){return n?(""+n).replace(c,"\n").replace(e,t).replace(f," "):""},encodeBase16:function(t){if(!t)return t;t+="";for(var n=[],e=0,r=t.length;r>e;e++)n.push(t.charCodeAt(e).toString(16).toUpperCase());return n.join("")},encodeBase16forJSON:function(t){if(!t)return t;t=t.replace(/[\u4E00-\u9FBF]/gi,function(t){return escape(t).replace("%u","\\u")});for(var n=[],e=0,r=t.length;r>e;e++)n.push(t.charCodeAt(e).toString(16).toUpperCase());return n.join("")},decodeBase16:function(t){if(!t)return t;t+="";for(var n=[],e=0,r=t.length;r>e;e+=2)n.push(String.fromCharCode("0x"+t.slice(e,e+2)));return n.join("")},encodeObject:function(t){if(t instanceof Array)for(var n=0,e=t.length;e>n;n++)t[n]=u.encodeObject(t[n]);else if("object"==("undefined"==typeof t?"undefined":(0,i.default)(t)))for(var r in t)t[r]=u.encodeObject(t[r]);else if("string"==typeof t)return u.encode(t);return t},loadScript:function(t){var n=document.createElement("script");document.getElementsByTagName("body")[0].appendChild(n),n.setAttribute("src",t)},addLoadEvent:function(t){var n=window.onload;"function"!=typeof window.onload?window.onload=t:window.onload=function(){n(),t()}}}}();t.exports=u},function(t,n){function e(t,n){t.classList?t.classList.add(n):t.className+=" "+n}t.exports=e},function(t,n){function e(t,n){if(t.classList)t.classList.remove(n);else{var e=new RegExp("(^|\\b)"+n.split(" ").join("|")+"(\\b|$)","gi");t.className=t.className.replace(e," ")}}t.exports=e},,,function(t,n){"use strict";function e(){var t=document.querySelector("#page-nav");if(t&&!document.querySelector("#page-nav .extend.prev")&&(t.innerHTML='<a class="extend prev disabled" rel="prev">&laquo; Prev</a>'+t.innerHTML),t&&!document.querySelector("#page-nav .extend.next")&&(t.innerHTML=t.innerHTML+'<a class="extend next disabled" rel="next">Next &raquo;</a>'),yiliaConfig&&yiliaConfig.open_in_new){var n=document.querySelectorAll(".article-entry a:not(.article-more-a)");n.forEach(function(t){t.setAttribute("target","_blank")})}var e=document.querySelector("#js-aboutme");e&&0!==e.length&&(e.innerHTML=e.innerText)}t.exports={init:e}},,,,,,,,,function(t,n){function e(t,n){if("string"==typeof n)return t.insertAdjacentHTML("afterend",n);var e=t.nextSibling;return e?t.parentNode.insertBefore(n,e):t.parentNode.appendChild(n)}t.exports=e}])</script><script src="/./main.4a524f.js"></script><script>!function(){var e=function(e){var t=document.createElement("script");document.getElementsByTagName("body")[0].appendChild(t),t.setAttribute("src",e)};e("/slider.885efe.js")}()</script>


<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


    
<div class="tools-col" q-class="show:isShow,hide:isShow|isFalse" q-on="click:stop(e)">
  <div class="tools-nav header-menu">
    
    
      
      
      
    
      
    
      
      
      
    
    

    <ul style="width: 70%">
    
    
      
      <li style="width: 50%" q-on="click: openSlider(e, 'innerArchive')"><a href="javascript:void(0)" q-class="active:innerArchive">所有文章</a></li>
      
        
      
        
      
      <li style="width: 50%" q-on="click: openSlider(e, 'aboutme')"><a href="javascript:void(0)" q-class="active:aboutme">关于我</a></li>
      
        
    </ul>
  </div>
  <div class="tools-wrap">
    
    	<section class="tools-section tools-section-all" q-show="innerArchive">
        <div class="search-wrap">
          <input class="search-ipt" q-model="search" type="text" placeholder="find something…">
          <i class="icon-search icon" q-show="search|isEmptyStr"></i>
          <i class="icon-close icon" q-show="search|isNotEmptyStr" q-on="click:clearChose(e)"></i>
        </div>
        <div class="widget tagcloud search-tag">
          <p class="search-tag-wording">tag:</p>
          <label class="search-switch">
            <input type="checkbox" q-on="click:toggleTag(e)" q-attr="checked:showTags">
          </label>
          <ul class="article-tag-list" q-show="showTags">
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color2">C</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color1">mysql</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color5">文件系统</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">dns</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">git</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color5">blog</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color1">httpd</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color5">java</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">算法</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color1">linux</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">lua</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">mac</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color1">maven</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">架构</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">php</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color2">python</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">rabbitmq</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color1">redis</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">rpc</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color5">ruby</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">ssh</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">svn</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color5">todo</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">tornado</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">vim</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">其它</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color5">运维工具</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">os</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">rpm</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">cdn</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color1">虚拟化技术</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color2">gitlab</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">go</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">iptables</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color2">spring</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">历史</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color2">thrift</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">协程</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color2">锁</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">xxx</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color5">数据结构</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color5">saas</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">网络</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color1">virtualbox</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color5">设计模式</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">计算机</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">电影篇</a>
              </li>
            
            <div class="clearfix"></div>
          </ul>
        </div>
        <ul class="search-ul">
          <p q-show="jsonFail" style="padding: 20px; font-size: 12px;">
            缺失模块。<br/>1、在博客根目录（注意不是yilia根目录）执行以下命令：<br/> npm i hexo-generator-json-content --save<br/><br/>
            2、在根目录_config.yml里添加配置：
<pre style="font-size: 12px;" q-show="jsonFail">
  jsonContent:
    meta: false
    pages: false
    posts:
      title: true
      date: true
      path: true
      text: true
      raw: false
      content: false
      slug: false
      updated: false
      comments: false
      link: false
      permalink: false
      excerpt: false
      categories: false
      tags: true
</pre>
          </p>
          <li class="search-li" q-repeat="items" q-show="isShow">
            <a q-attr="href:path|urlformat" class="search-title"><i class="icon-quo-left icon"></i><span q-text="title"></span></a>
            <p class="search-time">
              <i class="icon-calendar icon"></i>
              <span q-text="date|dateformat"></span>
            </p>
            <p class="search-tag">
              <i class="icon-price-tags icon"></i>
              <span q-repeat="tags" q-on="click:choseTag(e, name)" q-text="name|tagformat"></span>
            </p>
          </li>
        </ul>
    	</section>
    

    

    
    	<section class="tools-section tools-section-me" q-show="aboutme">
  	  	
  	  		<div class="aboutme-wrap" id="js-aboutme">王彪&lt;br&gt;计算机科学与技术专业&lt;br&gt;email:841824090@qq.com&lt;br&gt;2009-2013 苏州大学&lt;br&gt;2013-2015 苏州思必驰信息科技有限公司&lt;br&gt;2016-2017 美团&lt;br&gt;2017-至今 搜狗</div>
  	  	
    	</section>
    
  </div>
  
</div>
    <!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div> 
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>
  </div><!-- hexo-inject:begin --><!-- Begin: Injected MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({"tex2jax":{"inlineMath":[["$","$"],["\\(","\\)"]],"skipTags":["script","noscript","style","textarea","pre","code"],"processEscapes":true},"TeX":{"equationNumbers":{"autoNumber":"AMS"}}});
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<!-- End: Injected MathJax -->
<!-- hexo-inject:end -->
</body>
</html>